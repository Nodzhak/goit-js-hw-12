{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios'; // Додано бібліотеку Axios\n\nconst searchForm = document.querySelector('.form');\nconst galleryContainer = document.querySelector('.gallery');\nconst loaderElement = document.querySelector('.loader');\n\nlet searchParamsDefaults = {\n  key: '41631198-f5cd04d694ed896bf4215baa6',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nfunction showLoaderAndHideGallery() {\n  loaderElement.style.display = 'block';\n  galleryContainer.style.display = 'none';\n}\n\nfunction hideLoaderAndShowGallery() {\n  loaderElement.style.display = 'none';\n  galleryContainer.style.display = 'flex';\n}\n\nfunction generateGalleryHTML(hits) {\n  return hits.reduce((html, hit) => {\n    const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = hit;\n    return (\n      html +\n      `<li class=\"gallery-item\">\n        <a href=${largeImageURL}> \n          <img class=\"gallery-img\" src=${webformatURL} alt=${tags} />\n        </a>\n        <div class=\"gallery-text-box\">\n          <p>Likes: <span class=\"text-value\">${likes}</span></p>\n          <p>views: <span class=\"text-value\">${views}</span></p>\n          <p>comments: <span class=\"text-value\">${comments}</span></p>\n          <p>downloads: <span class=\"text-value\">${downloads}</span></p>\n        </div>\n      </li>`\n    );\n  }, '');\n}\n\nfunction renderGallery(hits) {\n  const galleryHTML = generateGalleryHTML(hits);\n  galleryContainer.innerHTML = galleryHTML;\n}\n\nfunction initializeImageLightbox() {\n  let lightbox = new SimpleLightbox('.gallery a', {\n    nav: true,\n    captionDelay: 250,\n    captionsData: 'alt',\n    close: true,\n    enableKeyboard: true,\n    docClose: true,\n  });\n  lightbox.refresh();\n}\n\nfunction handleNoResults() {\n  galleryContainer.style.display = 'none';\n  iziToast.error({\n    position: 'topRight',\n    color: 'red',\n    message: 'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nasync function searchImages(params) {\n  showLoaderAndHideGallery();\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?${params}`);\n    hideLoaderAndShowGallery();\n\n    if (response.status !== 200) {\n      throw new Error(response.statusText);\n    }\n\n    const { hits } = response.data;\n\n    if (hits.length > 0) {\n      renderGallery(hits);\n      initializeImageLightbox();\n    } else {\n      handleNoResults();\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n  searchParamsDefaults.q = event.target.elements.search.value.trim();\n  const searchParams = new URLSearchParams(searchParamsDefaults);\n  await searchImages(searchParams);\n  event.currentTarget.reset();\n});"],"names":["searchForm","galleryContainer","loaderElement","searchParamsDefaults","showLoaderAndHideGallery","hideLoaderAndShowGallery","generateGalleryHTML","hits","html","hit","largeImageURL","webformatURL","tags","likes","views","comments","downloads","renderGallery","galleryHTML","initializeImageLightbox","SimpleLightbox","handleNoResults","iziToast","searchImages","params","response","axios","error","event","searchParams"],"mappings":"owBAMA,MAAMA,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAgB,SAAS,cAAc,SAAS,EAEtD,IAAIC,EAAuB,CACzB,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEA,SAASC,GAA2B,CAClCF,EAAc,MAAM,QAAU,QAC9BD,EAAiB,MAAM,QAAU,MACnC,CAEA,SAASI,GAA2B,CAClCH,EAAc,MAAM,QAAU,OAC9BD,EAAiB,MAAM,QAAU,MACnC,CAEA,SAASK,EAAoBC,EAAM,CACjC,OAAOA,EAAK,OAAO,CAACC,EAAMC,IAAQ,CAChC,KAAM,CAAE,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EACjF,OACED,EACA;AAAA,kBACYE;AAAA,yCACuBC,SAAoBC;AAAA;AAAA;AAAA,+CAGdC;AAAA,+CACAC;AAAA,kDACGC;AAAA,mDACCC;AAAA;AAAA,YAIhD,EAAE,EAAE,CACP,CAEA,SAASC,EAAcV,EAAM,CAC3B,MAAMW,EAAcZ,EAAoBC,CAAI,EAC5CN,EAAiB,UAAYiB,CAC/B,CAEA,SAASC,GAA0B,CAClB,IAAIC,EAAe,aAAc,CAC9C,IAAK,GACL,aAAc,IACd,aAAc,MACd,MAAO,GACP,eAAgB,GAChB,SAAU,EACd,CAAG,EACQ,QAAO,CAClB,CAEA,SAASC,GAAkB,CACzBpB,EAAiB,MAAM,QAAU,OACjCqB,EAAS,MAAM,CACb,SAAU,WACV,MAAO,MACP,QAAS,0EACb,CAAG,CACH,CAEA,eAAeC,EAAaC,EAAQ,CAClCpB,IAEA,GAAI,CACF,MAAMqB,EAAW,MAAMC,EAAM,IAAI,4BAA4BF,GAAQ,EAGrE,GAFAnB,IAEIoB,EAAS,SAAW,IACtB,MAAM,IAAI,MAAMA,EAAS,UAAU,EAGrC,KAAM,CAAE,KAAAlB,CAAI,EAAKkB,EAAS,KAEtBlB,EAAK,OAAS,GAChBU,EAAcV,CAAI,EAClBY,KAEAE,GAEH,OAAQM,EAAP,CACA,QAAQ,MAAMA,CAAK,CACpB,CACH,CAEA3B,EAAW,iBAAiB,SAAU,MAAO4B,GAAU,CACrDA,EAAM,eAAc,EACpBzB,EAAqB,EAAIyB,EAAM,OAAO,SAAS,OAAO,MAAM,OAC5D,MAAMC,EAAe,IAAI,gBAAgB1B,CAAoB,EAC7D,MAAMoB,EAAaM,CAAY,EAC/BD,EAAM,cAAc,OACtB,CAAC"}